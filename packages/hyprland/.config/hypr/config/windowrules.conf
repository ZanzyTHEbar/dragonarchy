# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃                    Windowrules Configuration                ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

# Windows Rules https://wiki.hyprland.org/0.45.0/Configuring/Window-Rules/ #

# Float Necessary Windows
windowrule = float on, match:class ^(org\.pulseaudio\.pavucontrol)$
windowrule = float on, match:class ^()$, match:title ^(Picture in picture)$
windowrule = float on, match:class ^()$, match:title ^(Save File)$
windowrule = float on, match:class ^()$, match:title ^(Open File)$
windowrule = float on, match:class ^(LibreWolf)$, match:title ^(Picture-in-Picture)$
windowrule = float on, match:class ^(blueman-manager)$
windowrule = float on, match:class ^(xdg-desktop-portal-gtk|xdg-desktop-portal-kde|xdg-desktop-portal-hyprland)(.*)$
windowrule = float on, match:class ^(polkit-gnome-authentication-agent-1|hyprpolkitagent|org.org.kde.polkit-kde-authentication-agent-1)(.*)$
windowrule = float on, match:class ^(CachyOSHello)$
windowrule = float on, match:class ^(zenity)$
windowrule = float on, match:class ^()$, match:title ^(Steam - Self Updater)$
# Increase the opacity
windowrule = opacity 0.92, match:class ^(thunar|nemo)$
windowrule = opacity 0.96, match:class ^(discord|armcord|webcord|vivaldi)$
windowrule = opacity 0.95, match:title ^(QQ|Telegram)$
windowrule = opacity 0.95, match:title ^(NetEase Cloud Music Gtk4)$
# General window rules
windowrule = float on, match:title ^(Picture-in-Picture)$
windowrule = size 960 540, match:title ^(Picture-in-Picture)$
windowrule = move 25%-, match:title ^(Picture-in-Picture)$
windowrule = float on, match:title ^(imv|mpv|danmufloat|termfloat|nemo|ncmpcpp)$
windowrule = move 25%-, match:title ^(imv|mpv|danmufloat|termfloat|nemo|ncmpcpp)$
windowrule = size 960 540, match:title ^(imv|mpv|danmufloat|termfloat|nemo|ncmpcpp)$
windowrule = pin on, match:title ^(danmufloat)$
windowrule = rounding 5, match:title ^(danmufloat|termfloat)$
windowrule = animation slide right, match:class ^(kitty|Alacritty)$
windowrule = scroll_touchpad 1.5, match:class ^(Alacritty)$
windowrule = no_blur on, match:class ^(org.mozilla.firefox)$
# Decorations related to floating windows on workspaces 1 to 10
windowrule = border_size 2, match:float true, match:workspace w[fv1-10]
windowrule = border_color $accent, match:float true, match:workspace w[fv1-10]
windowrule = rounding 8, match:float true, match:workspace w[fv1-10]
# Decorations related to tiling windows on workspaces 1 to 10
windowrule = border_size 3, match:float false, match:workspace f[1-10]
windowrule = rounding 4, match:float false, match:workspace f[1-10]
# Windows Rules End #

# Workspaces Rules https://wiki.hyprland.org/0.45.0/Configuring/Workspace-Rules/ #
# workspace = 1, default:true, monitor:$priMon
# workspace = 6, default:true, monitor:$secMon
# Workspace selectors https://wiki.hyprland.org/0.45.0/Configuring/Workspace-Rules/#workspace-selectors
# workspace = r[1-5], monitor:$priMon
# workspace = r[6-10], monitor:$secMon
# workspace = special:scratchpad, on-created-empty:$applauncher
# no_gaps_when_only deprecated instead workspaces rules with selectors can do the same
# Smart gaps from 0.45.0 https://wiki.hyprland.org/0.45.0/Configuring/Workspace-Rules/#smart-gaps
workspace = w[tv1-10], gapsout:5, gapsin:3
workspace = f[1], gapsout:5, gapsin:3
# Workspaces Rules End #

# Layers Rules #
layerrule = animation slide top, match:namespace logout_dialog
# layerrule = animation popin 50%, waybar
layerrule = animation slide down, match:namespace waybar
layerrule = animation fade 50%, match:namespace wallpaper

# Walker layer rules (Walker is a layer surface, not a window)
# Make Walker appear as proper fullscreen overlay
layerrule = no_anim on, match:namespace walker  # Disable animation to prevent positioning issues
layerrule = blur on, match:namespace walker
layerrule = ignore_alpha 0.5, match:namespace walker
# Layers Rules End #


# Clipboard Rules #
# Source enhanced clipboard window rules
source = ~/.config/hypr/config/windowrules-clipboard.conf
# Clipboard Rules End #

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
windowrule = suppress_event maximize, match:class .*

# Force chromium into a tile to deal with --app bug
windowrule = tile on, match:class ^(Chromium)$

# Float and center settings and previews
windowrule = float on, match:class ^(blueberry.py|Impala|Wiremix|org.gnome.NautilusPreviewer|Dragon|About)$
windowrule = center on, match:class ^(blueberry.py|Impala|Wiremix|org.gnome.NautilusPreviewer|Dragon|About)$
windowrule = workspace special:scratchpad, match:class ^(Dragon)$
windowrule = size 800 600, match:class ^(blueberry.py|Impala|Wiremix|org.gnome.NautilusPreviewer|com.gabm.satty)$
windowrule = size 590 450, match:class Dragon
windowrule = size 1200 800, match:class About

# Float and center file pickers
windowrule = float on, match:class xdg-desktop-portal-gtk, match:title ^(Open.*Files?|Save.*Files?|All Files|Save)
windowrule = center on, match:class xdg-desktop-portal-gtk, match:title ^(Open.*Files?|Save.*Files?|All Files|Save)

# Float Steam, fullscreen RetroArch
windowrule = float on, match:class steam
windowrule = center on, match:class steam, match:title Steam
windowrule = fullscreen on, match:class ^(com.libretro.RetroArch)$

# Fullscreen screensaver
windowrule = fullscreen on, match:class Screensaver

# Just dash of opacity
windowrule = opacity 0.97 0.9, match:class .*
windowrule = opacity 1 0.97, match:class ^(Chromium|chromium|google-chrome|google-chrome-unstable|vivaldi|vivaldi-stable)$
windowrule = opacity 1 1, match:initial_title ^(youtube.com_/)$ # Youtube
windowrule = opacity 1 1, match:class ^(zoom|vlc|mpv|org.kde.kdenlive|com.obsproject.Studio|com.github.PintaProject.Pinta|imv|org.gnome.NautilusPreviewer)$
windowrule = float on, match:class ^(zoom)$
windowrule = opacity 1 1, match:class ^(com.libretro.RetroArch|steam)$

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Zoom-Specific Fixes for Hyprland/XWayland Rendering Issues
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Zoom runs via XWayland (X11 compatibility) which can cause:
# - Transparent/blurred meeting windows
# - Alpha channel mishandling
# - Compositor interference
#
# These rules prevent blur, force full opacity, and optimize rendering:
windowrule = no_blur on, match:class ^(zoom)$
windowrule = no_shadow on, match:class ^(zoom)$, match:title ^(Zoom Meeting)$
windowrule = opaque on, match:class ^(zoom)$
windowrule = immediate on, match:class ^(zoom)$, match:title ^(Zoom Meeting)$
# Prevent tearing and ensure smooth rendering for meeting window
windowrule = force_rgbx on, match:class ^(zoom)$, match:title ^(Zoom Meeting)$
# Keep Zoom windows on top during meetings (optional, comment out if unwanted)
# windowrule = stay_focused on, match:class ^(zoom)$, match:title ^(Zoom Meeting)$

# Fix some dragging issues with XWayland
windowrule = no_focus on, match:class ^$, match:title ^$, match:xwayland true, match:float true, match:fullscreen false, match:pin false

# XWayland Screen Sharing
windowrule = opacity 0.0 override, match:class ^(xwaylandvideobridge)$
windowrule = no_anim on, match:class ^(xwaylandvideobridge)$
windowrule = no_initial_focus on, match:class ^(xwaylandvideobridge)$
windowrule = max_size 1 1, match:class ^(xwaylandvideobridge)$
windowrule = no_blur on, match:class ^(xwaylandvideobridge)$
windowrule = no_focus on, match:class ^(xwaylandvideobridge)$

# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃                    Gaming Performance Rules                ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

# Steam Games - Performance Optimizations
windowrule = fullscreen on, match:class ^(steam_app_.*)$
windowrule = workspace unset, match:class ^(steam_app_.*)$  # Allow any workspace
windowrule = opacity 1.0 override 1.0 override, match:class ^(steam_app_.*)$  # No transparency
windowrule = no_blur on, match:class ^(steam_app_.*)$  # Disable blur for performance
windowrule = border_size 0, match:class ^(steam_app_.*)$  # Remove borders in fullscreen
windowrule = no_shadow on, match:class ^(steam_app_.*)$  # Disable shadows
windowrule = no_anim on, match:class ^(steam_app_.*)$  # Disable animations for games
windowrule = immediate on, match:class ^(steam_app_.*)$  # Disable vsync for games (better performance)
windowrule = force_rgbx on, match:class ^(steam_app_.*)$  # Force RGB color space

# Additional gaming window classes
windowrule = fullscreen on, match:class ^(cs2|dota2|hl2_linux|steam_proton)$
windowrule = opacity 1.0 override 1.0 override, match:class ^(cs2|dota2|hl2_linux|steam_proton)$
windowrule = no_blur on, match:class ^(cs2|dota2|hl2_linux|steam_proton)$
windowrule = no_anim on, match:class ^(cs2|dota2|hl2_linux|steam_proton)$
windowrule = immediate on, match:class ^(cs2|dota2|hl2_linux|steam_proton)$

# Wine/Proton games
windowrule = fullscreen on, match:class ^(steam_app_.*|.*\.exe)$
windowrule = opacity 1.0 override 1.0 override, match:class ^(.*\.exe)$
windowrule = no_blur on, match:class ^(.*\.exe)$
windowrule = immediate on, match:class ^(.*\.exe)$
