#!/bin/bash
# Displays a power menu.

# If wlogout is present and not explicitly disabled, prefer it
if command -v wlogout >/dev/null 2>&1 && [ -z "${DRAGON_TUI_ONLY:-}" ]; then
  exec wlogout
else
  show_power_menu() {
    local options=("Lock" "Logout" "Suspend" "Reboot" "Shutdown" "Cancel")
    local choice=$(printf "%s\n" "${options[@]}" | gum choose --header="Power Menu")

    case "$choice" in
    "Lock") hyprlock ;;
    "Logout") uwsm stop ;;
    "Suspend") systemctl suspend ;;
    "Reboot") systemctl reboot ;;
    "Shutdown") systemctl poweroff ;;
    "Cancel") exit 0 ;;
    esac
  }

  show_power_menu
fi
